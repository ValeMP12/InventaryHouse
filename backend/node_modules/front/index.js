var connect = require('connect'),
    queue   = require('under').queue;

var from_port = process.argv[2] || 9000;
var to_port   = process.argv[3] || 3000;

var options = {
  debug: true,
  max_active: 50,
  timeout: 10000,
  backend: {
    host: 'localhost',
    port: to_port
  }
}

connect()
 .use(connect.logger({ immediate: false, format: 'dev' }))
 .use(queue.setup(options))
 .listen(from_port)

console.log('Proxying from ' + from_port + ' to ' + to_port);
